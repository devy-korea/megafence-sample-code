<!DOCTYPE html>
<html>
<head>
    <!-- 하단부에 Frontend 방식의 유량제어 서비스 호출 샘플코드가 설명되어 있습니다 -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- custom css -->
    <link href="https://cdn.devy.kr/dist/bulma-0.7.1/bulma.css" rel="stylesheet" />
    <link href="https://cdn.devy.kr/dist/element-ui-2.1.3/lib/theme-chalk/index.css" rel="stylesheet" />

    <style>
        html, body {
            height: 100%;
            width: 100%;
            overflow-y: hidden;
            background-color: black;
        }

        #myVideo {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
        }

        .container {
            position: absolute;
            left: 50%;
            bottom: 2rem;
            transform: translateX(-50%);
            padding: 20px;
            text-align: left;
            max-width: 800px;
            background-color: white;
            border: 2px solid grey;
            border-radius: 20px;
            overflow-y: hidden;
        }

        label.error {
            font-size: 0.9rem;
            color: red;
        }
    </style>


</head>
<body>
    <video autoplay muted loop id="myVideo">
        <source src="//cdn.devy.kr/movie/to-the-moon.mp4" type="video/mp4">
    </video>

    <div id="app" class="container">
        <form id="form1">
            <h1 class="title">
                [DEMO] TO THE MOON 여행 패키지 신청
            </h1>
            <h2 class="subtitle"></h2>
            <div class="field">
                <label class="label">Name</label>
                <div class="control">
                    <input class="input" type="text" placeholder="Text input" value="홍길동">
                </div>
            </div>

            <div class="field">
                <label class="label">Email</label>
                <div class="control">
                    <input class="input" type="email" placeholder="Email input" value="hello@devy.kr">
                </div>
            </div>

            <div class="field ">
                <label class="label">Course</label>
                <div class="control">
                    <div class="select">
                        <select name="Course" required>
                            <option value="S">달나라</option>
                        </select>
                    </div>
                </div>
            </div>
        </form>
        <hr />


        <div class="field is-grouped">
            <div class="control">
                <button id="order-button" class="button is-oreder is-link" type="button">주문하기</button>
                <button id="reservation-button" class="button is-oreder is-link" type="button">상담예약</button>
            </div>
            <div class="control">
                <button class="button is-text" onclick="window.location.href='/';">Cancel</button>
            </div>
        </div>
        <p class="has-text-grey has-text-weight-bold">버튼 Click 시 Frontend 방식의 유량제어 서비스를 호출합니다.</p>
        <div class="notification is-white has-text-centered" style="padding-bottom:0;">
            <a class="button is-warning" href="backend.php">Backend 방식 DEMO</a>
            <a class="button is-warning" href="https://cdn.devy.kr/9000/landing.html">Landing 방식 DEMO</a>
        </div>
    </div>

    <!-- Custom lib -->
    <script src="https://cdn.devy.kr/dist/jquery/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.devy.kr/dist/vue-2.6.10/vue.min.js"></script>
    <script src="https://cdn.devy.kr/dist/element-ui-2.1.3/lib/index.js"></script>
    <script src="https://cdn.devy.kr/dist/jquery-validation-1.17.0/jquery.validate.min.js"></script>


    <!-- 여기부터 읽어주세요 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
    <!-------------------------------------------------------------------------------
     BEGIN OF 유량제어 include (body 하단부에 배치해 주세요)
     --------------------------------------------------------------------------------
     ※테스트 성공 후 아래의 css 및 js 경로에서 "9000" 대신 할당받은 SERVICE-ID로 변경하세요-->
    <link href="https://cdn.devy.kr/9000/css/webgate.css?v=210716" rel="stylesheet" />
    <link href="https://cdn.devy.kr/9000/css/webgate-frontend.css?v=210716" rel="stylesheet" />
    <script src="https://cdn.devy.kr/9000/js/webgate.js?v=210716"></script>
    <!-- END OF 유량제어 include -->

    <script>
        /* -------------------------------------------------------------------------------
         * BEGIN OF 유량제어 호출
         * -------------------------------------------------------------------------------
            1. 버튼의 click 이벤트에서 WG_StartWebGate() 호출하고, 기존 업무로직은 bind 처리
                BEFORE: function() { doYourProcess(p1, p2, ...); }
                AFTER : function() { WG_StartWebGate(GATE-ID, doYourProcess.bind(null, p1, p2, ...); }
            2. 이 샘플에서 대기UI가 표시되면 OK, GATE - ID를 할당받은 값으로 변경해서 사용합니다.
        */

        // 주문버튼 OR 상담예약 클릭 시 GATE-ID 1로 유량제어 호출합니다
        document.getElementById("order-button")
            .addEventListener("click", function () {
                WG_StartWebGate(1, doYourProcess.bind(null, "A"));
            });
        document.getElementById("reservation-button")
            .addEventListener("click", function () {
                WG_StartWebGate(1, doYourProcess.bind(null));
            });
        /* END OF 유량제어 호출 */







        $(function () {
            $("#form1").validate();
        })

        /* 고객사 Business logic 호출 부
         * Ajax 호출, post 처리 등 원래 처리되고 있던 Business logic을 여기에 구현합니다.
         * */
        function doYourProcess(productId) {
            if (productId)
                alert(productId + " 상품 주문이 접수되었습니다.");
            else
                alert("예약이 접수되었습니다.");
        }
    </script>
</body>
</html>
